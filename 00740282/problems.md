# ProblemSet

## Chapter 1

### 1.2

编制脚本程序。接受用户输入的两个数。其中一个为一年期定期存款本金，一个为一年期定期存款利率。计算一年期满后本金与利息总额。说明：（1）存款金额以人民币元为单位；（2）输入利率时不需要输入百分号，例如一年期定期存款年利率为 2.52%，输入 2.52 即可。

### 1.3

继续上一题。现实生活中，储户在填定期存单时有“到期自动转存”选项，它表示在存单期满后自动转存为同样存期的新定期存单，结存的本金与利息总额将作为新本金。计算自动转存一次和两次后的期满金额。

### 1.4

接受用户输入的两个整数，求其阶乘之和并输出结果。

## Chapter 2

### 2.2

接受用户输入的年份和月份，返回该月的天数。要求分别使用分支结构与匹配语句实现。

### 2.7

与习题 2.2 有关。接受用户输入的年月日信息，输出该日为该年的第几天。计算和输出时，1 月 1 日记为第 1 天，1 月 2 日记为第 2 天，以此类推。注：需要考虑闰年问题；不得使用 Python 标准库中的函数或类。

### 2.10

打印所有 100 至 999 之间的水仙花数。所谓水仙花数，是指各位数字的立方和为该数字本身的整数。

### 2.14

接受用户输入的 [1, 12] 范围内的整数，对其输入进行数据有效性检查。即，当用户输入了范围外的整数时，提醒用户输入有误。分别使用匹配语句、异常处理机制和断言语句实现之。

## Chapter 3

### 3.13

编写函数，统计一个字符串中所有元音字母的出现总次数及出现总频率。函数应同时返回这两者。

### 3.14

设计算法，将某个合数 n 分解为若干素因子的乘积。例如，6 = 2 * 3。

### 3.15

编写函数 get_prime_gap()，接受整型参数 n，返回其后素数与前素数的差值。例如，n 为 10 时，后素数为 11，前素数为 7，故此函数此时应返回 4。而当 n 为素数时，返回 0。

### 3.20

编写函数 get_int()，接受指定范围内的整数。如果用户输入了非法数据，请求用户重新输入。要求使用异常处理机制。

### 3.23

编写函数 test_prime()，接受用户输入的某个自然数 n，调用例 3.12 实现的函数 is_prime() 输出其是否为素数的信息。要求使用异常处理机制。

```python
# 例3.12
def is_prime(n: int) -> bool:
    import math
    if type(n) is not int:
        raise TypeError('must be an integer, but "%s" found' % type(n))
    if n < 2:
        raise ValueError('must be greater than 1, but "%d" found' % n)
    if n == 2: return True
    if n % 2 == 0: return False
    for i in range(3, math.ceil(math.sqrt(n)), 2):
        if n % i == 0: return False
    return True
```

## Chapter 4

### 4.3

编写函数。接受用户输入的字符串，判断其是否为合法 Python 标识符。

### 4.5

编写函数 is_word_palindrome()，判断某个给定的英文字符串是否为单词回文。实际处理时，忽略所有非英文单词内容。所谓单词回文是指，正读与倒读时，其中单词及它们的次序完全一致的字符串。

### 4.11

编写函数，计算圆周率。存在圆心在直角坐标系原点且半径为 1 的圆及其外切正方形。为计算方便，仅考虑它们位于第一象限的那四分之一部分。随机生成该四分之一正方形中的一系列点，散布于四分之一圆内比例即为圆周率四分之一。

### 4.12

编写程序，随机生成 10 个 [0.0, 1.0] 之间的实数，使用 pickle 模块将它们持久化至文件“floats_dump_file.dat”中。随后从该文件中读取这些浮点数并输出。注：不得使用元组、列表等复合数据对象存储这些实数。

## Chapter 5

### 5.4

假设天气预报的格式为形如“(日期, 城市, 天气描述, 最低温度, 最高温度)”的五元组。编写程序，以嵌套元组的形式保存下述城市天气预报，并按照最高温度从大到小的次序进行排序。其中日期 day 使用 datetime 模块中的 date 类构造。实现本题时，可以将下述天气信息替换为当日播报的内容。

t1 = (day, "北京", "多云", 20, 34)

t2 = (day, "哈尔滨", "小雨", 10, 15)

t3 = (day, "上海", "多云转小雨", 19, 25)

t4 = (day, "武汉", "中雨", 19, 24)

t5 = (day, "深圳", "阴转阵雨", 25, 30)

t6 = (day, "西安", "小雨转多云", 16, 30)

t7 = (day, "成都", "阴转晴", 17, 29)

t8 = (day, "香港", "阵雨", 25, 28)

### 5.5

挑战性问题。继续上一题。现在考虑将多日多地的天气预报信息以逗号分隔值的形式保存在一个文本文件中。其中，每个文本行保存单个城市某日的天气预报信息，其具体数据格式为“日期,城市,天气描述,最低温度,最高温度”。注意，其中的逗号和数字均为半角字符（即与 ASCII 码兼容的字符），而文字描述可能为汉字，日期格式则为“YYYY-MM-DD”。读入该文件，以元组型式保存每行天气预报信息，并将这些元组保存在一个列表对象中。现在需要对这些数据排序。具体排序规则是：按照日期从小到大的次序排序，但对于具有同样日期的数据，各城市按照最高温度从大到小排序。

### 5.14

挑战性问题。接受用户输入的四则运算表达式，使用栈进行表达式求值。算术表达式是形如“1 – (2 + 3) * 4”这样的表达式。

### 5.15

挑战性问题。继续上一题。快算 24 游戏（单次游戏）。编写程序，随机生成 4 个 [1, 13] 之间的整数，数字允许重复，判断其能否算出 24。如果能，给出其计算公式。本游戏的一般计算规则为：（1）仅允许进行四则算术运算，即仅能进行加减乘除运算，但中间计算结果可以为分数；（2）允许使用括号改变操作符的优先级。

### 5.16

挑战性问题。继续上一题。快算 24 游戏（回合制）。编写程序，以每次计算为一局，以 10 局为一轮。对于每次生成的 4 个整数，接受用户输入的表达式，判断其是否计算正确。一轮结束时，统计用户该轮的胜率。

### 5.31

将形如 y = f(x) 这样的数学函数以键值对的形式保存在字典中。其中，键为函数名称对应的字符串，值为函数对象。此后使用函数名称匹配对应的函数对象，调用该函数。以常用三角函数为例实现本题。注：实现三个三角函数即可。

## Chapter 6

### 6.1

完善例 6.8 的实现。为数偶类 Couple 提供属性存取方法.

```python
# 【例6.8】定义整数数偶类 Couple。其有两个整数属性 _1 与 _2。定义初始化方法，设置 _1 与 _2 的初始值，缺省时均设置为 0。
class Couple:
    """A simple integer couple class definition

    Attributes:
        _1: The first field of an integer couple, initialized with 0.
        _2: The second field of an integer couple, initialized with 0.

    Functions:
        __init__(self, x = 0, y = 0) -> None:
            Use x and y to initialize the integer couple, self.
        Parameters:
            self: The object per se.
            x: An integer, 0 as its default argument value.
            y: An integer, 0 as its default argument value.
        Returned value:
            None.

    f(self) -> str:
        Get the string representation of the integer couple.
        Parameter:
            self: The object per se.
        Returned value:
            A string representation with the integer couple (x, y).
    """

#  具象初始化方法，由系统自动调用。
def __init__(self, x: int = 0, y: int = 0) -> None:
    self._1, self._2 = x, y

def f(self) -> str:
    return f"I'm ({self._1}, {self._2})!"

###  end of the definition of class 'Couple'

#  缺省构造，两个字段均设为 0。
a = Couple()
print(a.f())                                #  I'm (0, 0)!

#  部分缺省构造，_1 为 1，_2 为 0。
b = Couple(1)
print(b.f())                                #  I'm (1, 0)!

#  不缺省构造，_1 为 1，_2 为 1。
c = Couple(1, 1)
print(c.f())                                #  I'm (1, 1)!
```

### 6.2

继续上一题。为数偶类 Couple 定制格式化方法和转换为字符串的方法。

### 6.3

继续上一题。为数偶类 Couple 定制比较方法。两个数偶的比较规则是：首先比较 \_1 属性，其次比较 \_2 属性。两个属性都相等时，数偶相等；否则不等。两者的大小关系则由 \_1 属性的大小关系确定；\_1 属性相等时，由 \_2 属性的大小关系确定。

### 6.6

挑战性问题。使用面向对象架构重新实现第 5.16 题。
