# 实验报告

## 小组分工

Co-Authored with 齐天下&刘昊宇

```text
黑盒1：10
黑盒2：10
黑盒3：25
黑盒4：5
黑盒加分：0
黑盒总分：50
白盒git：5
白盒代码：5
白盒报告：9
白盒总分：19
队伍原始分：69
评语：体积元对theta不是均匀的，生成顶点数不够，顶点分布不够均匀，PEtime直方图不理想，光子数不够，平方反比不理想，Probe图像缺块太多涨落太大，实验报告应插入图片
```

## 解决问题的整体思路

### 物理过程

1. 在液闪球内随机生成顶点
2. 每个顶点生成10000个光子
3. 光子按照一定的分布延迟产生，并发射
4. 光子在液闪球表面发生全反射（由于全反射及对称性无法射出，丢弃这个光子）
5. 光子在液闪球表面发生反射，计算反射后的方向
6. 光子在液闪球表面发生折射，进入水球
7. 光子在水球，击中外部的某个pmt或者逃逸，产生信号
8. 计算光子运行时间

### 代码结构

```bash
.
├── simulate.py                     # 主程序
│   ├── vertex_generation.py            # 生成顶点
│   ├── vertex_simulation.py            # 顶点模拟
│   │   ├── photon_move.py                 # 光子移动
│   │   ├── photon_reflection.py           # 边界反射
│   │   ├── photon_out.py                  # 出射
│   │   └── photon_hitting.py              # 击中pmt
│   └── draw.py                         # 画图
└── utils.py                        # 工具函数

```

## 存在的问题

1. 没有判断光子打在PMT前方还算后方
2. 代码运行太慢，需要优化计算过程
